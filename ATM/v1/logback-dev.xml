<?xml version="1.0" encoding="UTF-8"?>
<configuration debug="true">
	<!-- Appender que loguea asincronicamente a archivo, utilizado para debug -->
	<appender class="ch.qos.logback.core.FileAppender" name="file">
		<immediateFlush>true</immediateFlush>
		<file>debug.log</file>
		<encoder class="net.logstash.logback.encoder.LoggingEventCompositeJsonEncoder">
			<providers>
				<mdc/>
				<!-- MDC variables on the Thread will be written as JSON fields -->
				<!--	<context />Outputs entries from logback's context -->
				<!--	<version />Logstash json format version, the @version field in the output -->
				<logLevel/>
				<loggerName/>
				<pattern>
					<pattern>{
						"appName": "ATM",
						<!--or searching with Kibana -->
						"appVersion": "v1"
						}</pattern>
				</pattern>
				<threadName/>
				<logstashMarkers/>
				<!-- Useful so we can add extra information for specific log lines as Markers -->
				<message/>
				<!--	<arguments />or through StructuredArguments -->
				<stackTrace/>
			</providers>
		</encoder>
	</appender>
	<appender class="ch.qos.logback.classic.AsyncAppender" name="AsyncFile">
		<appender-ref ref="file"/>
	</appender>
	<!-- Appender que loguea en consola, utilizado para debug -->
	<appender class="ch.qos.logback.core.ConsoleAppender" name="console">
		<encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder">
			<pattern>%d{HH:mm:ss.SSS} [%thread] %-5level %logger{0} - %msg%n
			</pattern>
		</encoder>
	</appender>
	<!-- Esto hace un override del nivel de logueo utilizado en el profile 
			de las llamadas SOAP (tanto request como response), utilizado cuando se instancia 
			el logger antes de las mismas -->
	<logger level="TRACE" name="org.springframework.ws.client.MessageTracing.sent">
		<appender-ref ref="AsyncFile"/>
		<appender-ref ref="console"/>
	</logger>
	<logger level="TRACE" name="org.springframework.ws.client.MessageTracing.received">
		<appender-ref ref="AsyncFile"/>
		<appender-ref ref="console"/>
	</logger>
	<!-- Utilizado para loguear los HttpRequests y responses -->
	<logger level="info" name="Prisma">
		<appender-ref ref="AsyncFile"/>
	</logger>
	<root level="info" name="Prisma_root">
		<appender-ref ref="console"/>
	</root>
</configuration>